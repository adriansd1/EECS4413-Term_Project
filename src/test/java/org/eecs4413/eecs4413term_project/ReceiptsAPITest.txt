# --- CONFIGURATION ---
HOST="http://localhost"
PORT=8080
BASE_URL="$HOST:$PORT/api/receipts"

# REPLACE THESE with valid IDs from your database
VALID_PURCHASE_UUID="<REPLACE_WITH_REAL_UUID_FROM_PURCHASES_TABLE>"
VALID_OWNER_ID="1"  # The seller's User ID
VALID_AUCTION_ID="101" # The ID of the item being sold

echo "--- 1. Create Receipt (Success) ---"
curl -i -X POST "$BASE_URL/createReceipt" \
  -H "Content-Type: application/json" \
  -d '{
    "purchaseId": "'"$VALID_PURCHASE_UUID"'",
    "owner_id": "'"$VALID_OWNER_ID"'",
    "shippingDays": 3,
    "auctionId": '$VALID_AUCTION_ID'
  }'
echo -e "\n"

echo "--- 2. Create Receipt - Invalid UUID Format (Expect 400) ---"
curl -i -X POST "$BASE_URL/createReceipt" \
  -H "Content-Type: application/json" \
  -d '{
    "purchaseId": "not-a-uuid",
    "owner_id": "'"$VALID_OWNER_ID"'",
    "shippingDays": 3,
    "auctionId": '$VALID_AUCTION_ID'
  }'
echo -e "\n"

echo "--- 3. Create Receipt - Non-existent Purchase (Expect 404) ---"
curl -i -X POST "$BASE_URL/createReceipt" \
  -H "Content-Type: application/json" \
  -d '{
    "purchaseId": "00000000-0000-0000-0000-000000000000",
    "owner_id": "'"$VALID_OWNER_ID"'",
    "shippingDays": 3,
    "auctionId": '$VALID_AUCTION_ID'
  }'
echo -e "\n"

echo "--- 4. Get All Receipts ---"
curl -i -X GET "$BASE_URL/getAllReceipts" -H "Accept: application/json"
echo -e "\n"

echo "--- 5. Get Receipts by Purchase ID ---"
curl -i -X GET "$BASE_URL/getReceiptsByPurchase/$VALID_PURCHASE_UUID" -H "Accept: application/json"
echo -e "\n"