# Purchases API tests â€” adjust HOST/PORT and replace placeholders
HOST="http://localhost"
PORT=8083
BASE_URL="$HOST:$PORT/api/purchases"

# 1) Successful purchase (expects 200)
curl -i -X POST "$BASE_URL/makePurchase" \
  -H "Content-Type: application/json" \
  -d '{
    "item": "Notebook",
    "amount": 2,
    "price": 9.99,
    "cardNumber": "4111111111111111",
    "cardExpiry": "12/25",
    "cardCvv": "123",
    "userId": "<USER_ID>"
  }'

# 2) Invalid card details (expects 400)
curl -i -X POST "$BASE_URL/makePurchase" \
  -H "Content-Type: application/json" \
  -d '{
    "item": "Pen",
    "amount": 1,
    "price": 1.50,
    "cardNumber": "invalid_card",
    "cardExpiry": "13/25",
    "cardCvv": "12",
    "userId": "<USER_ID>"
  }'

# 3) Missing required fields (expects 400)
curl -i -X POST "$BASE_URL/makePurchase" \
  -H "Content-Type: application/json" \
  -d '{
    "item": "",
    "amount": null,
    "price": null,
    "cardNumber": "",
    "cardExpiry": "",
    "cardCvv": "",
    "userId": "<USER_ID>"
  }'

# 4) Negative price (expects 400)
curl -i -X POST "$BASE_URL/makePurchase" \
  -H "Content-Type: application/json" \
  -d '{
    "item": "Eraser",
    "amount": 1,
    "price": -5.00,
    "cardNumber": "4111111111111111",
    "cardExpiry": "12/25",
    "cardCvv": "123",
    "userId": "<USER_ID>"
  }'

# 5) Get all purchases (expects 200 + JSON list)
curl -i -X GET "$BASE_URL/getAllPurchases" -H "Accept: application/json"

# 6) Get specific purchase by ID (replace <PURCHASE_UUID>) (expects 200 or 404)
curl -i -X GET "$BASE_URL/getPurchase/<PURCHASE_UUID>" -H "Accept: application/json"